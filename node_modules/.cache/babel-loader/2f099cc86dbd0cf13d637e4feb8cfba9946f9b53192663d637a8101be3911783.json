{"ast":null,"code":"var _jsxFileName = \"/Users/nishidanaoto/ateori-app/src/components/pages/VotePage.tsx\",\n  _s = $RefreshSig$();\nimport { memo, useCallback, useContext, useEffect, useRef } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport { Spinner, Wrap, WrapItem, Center, useDisclosure } from \"@chakra-ui/react\";\nimport { LoginUserContext } from '../../providers/LoginUserProvider';\nimport { useAllTournament } from \"../../hooks/useAllTournament\";\nimport { TournamentCard } from \"../organisms/tournament/TournamentCard\";\nimport { useSelectTournament } from \"../../hooks/useSelectTournament\";\nimport { TournamentDetailModal } from \"../organisms/tournament/TournamentDetailModel\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const VotePage = /*#__PURE__*/_s( /*#__PURE__*/memo(_c = _s(() => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    loginUser,\n    setLoginUser\n  } = useContext(LoginUserContext);\n  const timerId = useRef(null);\n  const {\n    getTournaments,\n    tournaments,\n    loading\n  } = useAllTournament();\n  const {\n    onSelectTournament,\n    selectedTournament\n  } = useSelectTournament();\n  const {\n    isOpen,\n    onOpen,\n    onClose\n  } = useDisclosure();\n\n  // 自動ログアウトの時間（ミリ秒）\n  const autoLogoutTime = 600000; // 10分\n  //const autoLogoutTime = 10000; // 10秒\n\n  useEffect(() => {\n    const resetTimer = () => {\n      // タイマーをリセット\n      if (timerId.current) {\n        clearTimeout(timerId.current);\n      }\n\n      // 新たなタイマーをセット\n      timerId.current = setTimeout(() => {\n        // ログアウト処理（例: setLoginUser(null)）\n        setLoginUser(null);\n\n        // トップページにリダイレクト\n        navigate('/');\n      }, autoLogoutTime);\n    };\n\n    // ユーザーがアクションを起こすたびにタイマーをリセット\n    const resetTimerOnAction = () => {\n      resetTimer();\n    };\n\n    // 初回実行時にタイマーをセット\n    resetTimer();\n\n    // ユーザーのアクション（例: クリック）があった場合にタイマーをリセット\n    document.addEventListener('click', resetTimerOnAction);\n    return () => {\n      // コンポーネントがアンマウントされたときにクリア\n      if (timerId.current) {\n        clearTimeout(timerId.current);\n      }\n      document.removeEventListener('click', resetTimerOnAction);\n    };\n  }, [setLoginUser, navigate, timerId]);\n\n  // loginUserが存在するかどうかのチェック\n  useEffect(() => {\n    // loginUserが存在しない場合、トップページに遷移\n    if (!loginUser) {\n      navigate('/');\n    }\n  }, [loginUser, navigate]);\n  useEffect(() => getTournaments(), [getTournaments]);\n  const onClickTournament = useCallback(tournamentId => {\n    onSelectTournament({\n      tournamentId,\n      tournaments,\n      onOpen\n    });\n  }, [tournaments, onSelectTournament, onOpen]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [loading ? /*#__PURE__*/_jsxDEV(Center, {\n      h: \"100vh\",\n      children: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Wrap, {\n      p: {\n        base: 4,\n        md: 10\n      },\n      children: tournaments.map(tournament => /*#__PURE__*/_jsxDEV(WrapItem, {\n        mx: \"auto\",\n        children: [/*#__PURE__*/_jsxDEV(TournamentCard, {\n          tournamentId: tournament.tournamentId,\n          tournamentName: tournament.tournamentName,\n          eventDate2: tournament.eventDate2,\n          onClick: onClickTournament\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(PrimaryButton, {\n          disabled: userId === \"\" || userPass === \"\",\n          loading: loading,\n          onClick: onClickLogin,\n          children: \"\\u30ED\\u30B0\\u30A4\\u30F3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }, this)]\n      }, tournament.tournamentId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TournamentDetailModal, {\n      isOpen: isOpen,\n      onClose: onClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}, \"1erPU4lpnNvkV/SraHc76R1FWXs=\", false, function () {\n  return [useNavigate, useAllTournament, useSelectTournament, useDisclosure];\n})), \"1erPU4lpnNvkV/SraHc76R1FWXs=\", false, function () {\n  return [useNavigate, useAllTournament, useSelectTournament, useDisclosure];\n});\n_c2 = VotePage;\nvar _c, _c2;\n$RefreshReg$(_c, \"VotePage$memo\");\n$RefreshReg$(_c2, \"VotePage\");","map":{"version":3,"names":["memo","useCallback","useContext","useEffect","useRef","useNavigate","Spinner","Wrap","WrapItem","Center","useDisclosure","LoginUserContext","useAllTournament","TournamentCard","useSelectTournament","TournamentDetailModal","jsxDEV","_jsxDEV","Fragment","_Fragment","VotePage","_s","_c","navigate","loginUser","setLoginUser","timerId","getTournaments","tournaments","loading","onSelectTournament","selectedTournament","isOpen","onOpen","onClose","autoLogoutTime","resetTimer","current","clearTimeout","setTimeout","resetTimerOnAction","document","addEventListener","removeEventListener","onClickTournament","tournamentId","children","h","fileName","_jsxFileName","lineNumber","columnNumber","p","base","md","map","tournament","mx","tournamentName","eventDate2","onClick","PrimaryButton","disabled","userId","userPass","onClickLogin","_c2","$RefreshReg$"],"sources":["/Users/nishidanaoto/ateori-app/src/components/pages/VotePage.tsx"],"sourcesContent":["import { memo, useCallback, useContext, useEffect, useRef } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Spinner,\n  Wrap,\n  WrapItem,\n  Center,\n  useDisclosure,\n} from \"@chakra-ui/react\";\n\nimport { LoginUserContext } from '../../providers/LoginUserProvider';\nimport { useAllTournament } from \"../../hooks/useAllTournament\";\nimport {TournamentCard} from \"../organisms/tournament/TournamentCard\";\nimport { useSelectTournament } from \"../../hooks/useSelectTournament\";\nimport { TournamentDetailModal } from \"../organisms/tournament/TournamentDetailModel\";\n\nexport const VotePage = memo(() => {\n\n  const navigate = useNavigate();\n  const { loginUser, setLoginUser } = useContext(LoginUserContext);\n  const timerId = useRef<NodeJS.Timeout | null>(null);\n  const { getTournaments, tournaments, loading } = useAllTournament();\n  const {onSelectTournament, selectedTournament} = useSelectTournament();\n  const { isOpen, onOpen, onClose } = useDisclosure();\n\n  // 自動ログアウトの時間（ミリ秒）\n  const autoLogoutTime = 600000; // 10分\n  //const autoLogoutTime = 10000; // 10秒\n\n  useEffect(() => {\n    const resetTimer = () => {\n      // タイマーをリセット\n      if (timerId.current) {\n        clearTimeout(timerId.current);\n      }\n\n      // 新たなタイマーをセット\n      timerId.current = setTimeout(() => {\n        // ログアウト処理（例: setLoginUser(null)）\n        setLoginUser(null);\n\n        // トップページにリダイレクト\n        navigate('/');\n      }, autoLogoutTime);\n    };\n\n    // ユーザーがアクションを起こすたびにタイマーをリセット\n    const resetTimerOnAction = () => {\n      resetTimer();\n    };\n\n    // 初回実行時にタイマーをセット\n    resetTimer();\n\n    // ユーザーのアクション（例: クリック）があった場合にタイマーをリセット\n    document.addEventListener('click', resetTimerOnAction);\n\n    return () => {\n      // コンポーネントがアンマウントされたときにクリア\n      if (timerId.current) {\n        clearTimeout(timerId.current);\n      }\n      document.removeEventListener('click', resetTimerOnAction);\n    };\n  }, [setLoginUser, navigate, timerId]);\n\n  // loginUserが存在するかどうかのチェック\n  useEffect(() => {\n    // loginUserが存在しない場合、トップページに遷移\n    if (!loginUser) {\n      navigate('/');\n    }\n  }, [loginUser, navigate]);\n\n  useEffect(() => getTournaments(), [getTournaments]);\n\n  const onClickTournament = useCallback(\n    (tournamentId: number) => {\n      onSelectTournament({ tournamentId, tournaments, onOpen });\n    },\n    [tournaments, onSelectTournament, onOpen]\n  );\n\n  return (\n    <>\n     {loading ? (\n        <Center h=\"100vh\">\n          <Spinner />\n        </Center>\n      ) : (\n      <Wrap p={{ base: 4, md: 10 }}>\n          {tournaments.map((tournament) => (\n            <WrapItem key={tournament.tournamentId} mx=\"auto\">\n              <TournamentCard\n                tournamentId={tournament.tournamentId}\n                tournamentName={tournament.tournamentName}\n                eventDate2={tournament.eventDate2}\n                onClick={onClickTournament}\n              />\n                <PrimaryButton\n            disabled={userId === \"\" || userPass === \"\"}\n            loading={loading}\n            onClick={onClickLogin}\n          >\n            ログイン\n          </PrimaryButton>\n            </WrapItem>\n          ))}\n        </Wrap>\n      )}\n        <TournamentDetailModal\n        isOpen={isOpen}\n        onClose={onClose}\n      />\n    </>\n  );\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}